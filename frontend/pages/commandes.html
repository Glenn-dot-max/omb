<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Commandes - Oh My Brunch</title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <h1>ü•ê Oh My Brunch</h1>
      <ul class="nav-links">
        <li><a href="produits.html">Produits</a></li>
        <li><a href="formules.html">Formules</a></li>
        <li><a href="commandes.html" class="active">Commandes</a></li>
      </ul>
    </nav>

    <!-- Contenu principal -->
    <main class="container">
      <h2>üõí Gestion des commandes</h2>

      <!-- Actions principales -->
      <div class="actions-bar">
        <button id="open-create-modal" class="btn btn-primary">
          ‚ûï Nouvelle commande
        </button>
        <div class="stats">
          <span id="commandes-count">0 commande</span>
        </div>
      </div>

      <!-- Filtres et recherche -->
      <div class="filters-section">
        <input
          type="text"
          id="search-input"
          placeholder="üîç Rechercher un client..."
          class="search-input"
        />
        <select id="filter-date" class="filter-select">
          <option value="">Toutes les dates</option>
          <option value="today">Aujourd'hui</option>
          <option value="tomorrow">Demain</option>
          <option value="week">Cette semaine</option>
        </select>
        <button id="reset-filters" class="btn-secondary">
          ‚ôªÔ∏è R√©initialiser
        </button>
      </div>

      <!-- Liste des commandes -->
      <div id="commandes-list" class="products-grid">
        <p>Chargement des commandes...</p>
      </div>
    </main>

    <!-- MODALE DE CR√âATION DE COMMANDE -->
    <div id="create-modal" class="modal">
      <div class="modal-content modal-large">
        <!-- En-t√™te de la modale -->
        <div class="modal-header">
          <h3>‚ûï Cr√©er une nouvelle commande</h3>
          <button class="close-modal" id="close-create-modal">&times;</button>
        </div>

        <!-- Corps de la modale -->
        <div class="modal-body">
          <!-- SECTION 1 : Informations g√©n√©rales -->
          <div class="form-section">
            <h4>üìã Informations g√©n√©rales</h4>

            <div class="form-row">
              <div class="form-group">
                <label for="create-nom-client">Nom du client *</label>
                <input
                  type="text"
                  id="create-nom-client"
                  placeholder="Ex: Hotel Marriott"
                  required
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="create-delivery-date">Date de livraison *</label>
                <input type="date" id="create-delivery-date" required />
              </div>

              <div class="form-group">
                <label for="create-delivery-hour">Heure de livraison *</label>
                <input
                  type="time"
                  id="create-delivery-hour"
                  value="10:00"
                  required
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="create-nombre-couverts">Nombre de couverts *</label>
                <input
                  type="number"
                  id="create-nombre-couverts"
                  min="1"
                  value="1"
                  required
                />
              </div>

              <div class="form-group form-group-checkbox">
                <label>
                  <input type="checkbox" id="create-avec-service" checked />
                  <span>‚úÖ Avec service sur place</span>
                </label>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="create-notes">Notes / Commentaires</label>
                <textarea
                  id="create-notes"
                  rows="3"
                  placeholder="Ex: Allergies, pr√©f√©rences, instructions sp√©ciales..."
                ></textarea>
              </div>
            </div>
          </div>

          <!-- SECTION 2 : Formules -->
          <div class="form-section">
            <h4>üçΩÔøΩÔøΩÔøΩ Formules (<span id="formules-count">0</span>)</h4>

            <!-- Liste des formules ajout√©es -->
            <div id="formules-list" class="items-list">
              <p class="empty-state">
                Aucune formule ajout√©e. Ajoutez-en ci-dessous.
              </p>
            </div>

            <!-- Formulaire d'ajout de formule -->
            <div class="add-item-form">
              <select id="formule-select" class="form-select">
                <option value="">-- S√©lectionner une formule --</option>
              </select>
              <input
                type="number"
                id="formule-couverts"
                placeholder="Nb couverts"
                min="1"
                value="1"
                class="form-input-small"
              />
              <button
                type="button"
                id="add-formule-btn"
                class="btn btn-secondary"
              >
                ‚ûï Ajouter
              </button>
            </div>
          </div>

          <!-- SECTION 3 : Produits individuels -->
          <div class="form-section">
            <h4>
              üì¶ Produits individuels (<span id="produits-count">0</span>)
            </h4>
            <p class="section-hint">
              Optionnel : Ajoutez des produits en dehors des formules
            </p>

            <!-- Liste des produits ajout√©s -->
            <div id="produits-list" class="items-list">
              <p class="empty-state">Aucun produit ajout√©.</p>
            </div>

            <!-- Formulaire d'ajout de produit -->
            <div class="add-item-form">
              <select id="produit-select" class="form-select">
                <option value="">-- S√©lectionner un produit --</option>
              </select>
              <input
                type="number"
                id="produit-quantite"
                placeholder="Quantit√©"
                min="1"
                step="0.5"
                value="1"
                class="form-input-small"
              />
              <select id="produit-unite" class="form-select-small">
                <option value="">Unit√©</option>
              </select>
              <button
                type="button"
                id="add-produit-btn"
                class="btn btn-secondary"
              >
                ‚ûï Ajouter
              </button>
            </div>
          </div>
        </div>
        <!-- Fin modal-body -->

        <!-- Pied de la modale -->
        <div class="modal-footer">
          <button type="button" id="cancel-create" class="btn btn-secondary">
            Annuler
          </button>
          <button
            type="button"
            id="save-create-commande"
            class="btn btn-primary"
          >
            ‚úÖ Cr√©er la commande
          </button>
        </div>
      </div>
      <!-- Fin modal-content -->
    </div>
    <!-- Fin create-modal -->

    <!-- Scripts JavaScript -->
    <script src="../js/toast.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/commandes.js"></script>
  </body>
</html>
